<template>
    <Nav :title="title"></Nav>
    <div class="tabPages">
        <router-view></router-view>
    </div>
    <van-tabbar v-model="active"  @change="onTabbarChange">
        <van-tabbar-item icon="home-o" replace to="/online-training" >
            <template #icon="props">
                <div v-html="props.active ? ICON_Course.active : ICON_Course.inactive"></div>
            </template>
            培训
        </van-tabbar-item>
        <van-tabbar-item icon="search" replace to="/marketing" >
            <template #icon="props">
                <div v-html="props.active ? ICON_AITeacher.active : ICON_AITeacher.inactive"></div>
            </template>  
            营销
        </van-tabbar-item>
        <van-tabbar-item icon="friends-o" replace to="/smart-analyze" >
            <template #icon="props">
                <div v-html="props.active ? ICON_Practice.active : ICON_Practice.inactive"></div>
            </template>  
            智能分析
        </van-tabbar-item>
        <van-tabbar-item icon="setting-o" replace to="/mine" >
            <template #icon="props">
                <div v-html="props.active ? ICON_QuestionBank.active : ICON_QuestionBank.inactive"></div>
            </template>  
            我的
        </van-tabbar-item>
    </van-tabbar>
</template>
  
<script lang="ts" setup>
import { ref, onMounted} from 'vue';
import { useRoute, useRouter } from 'vue-router';
import Nav from "./common/TopNav.vue"
const active = ref(0);
const ICON_Practice = {
    active: '<svg t="1709484900236" class="icon" viewBox="0 0 1128 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8197" width="20" height="20"><path d="M518.269388 261.22449L273.763265 14.628571 112.84898 6.269388 121.208163 167.183673l244.506123 244.506123zM1046.987755 562.155102c-12.538776-12.538776-31.346939-12.538776-41.795918 0l-94.040817 94.040816-152.555102-152.555102-152.555102 152.555102 152.555102 152.555102-94.040816 94.040817c-12.538776 12.538776-12.538776 31.346939 0 41.795918s31.346939 12.538776 41.795918 0L1044.897959 606.040816c12.538776-10.44898 14.628571-29.257143 2.089796-43.885714 2.089796 0 2.089796 0 0 0zM1128.489796 940.408163l-83.591837 83.591837-183.902041-183.902041 83.591837-83.591837L1128.489796 940.408163z" fill="#1296db" p-id="8198"></path><path d="M1007.281633 0l-158.82449 8.359184-626.938776 629.028571-85.681632-87.771428c-12.538776-12.538776-31.346939-12.538776-41.795919 0-10.44898 10.44898-10.44898 29.257143 0 41.795918l334.367347 336.457143c12.538776 12.538776 31.346939 12.538776 41.795919 0 12.538776-12.538776 12.538776-31.346939 0-41.795919l-98.220409-100.310204 626.938776-629.028571 8.359184-156.734694zM0 925.779592l83.591837 83.591837 185.991836-185.991837-83.591836-83.591837L0 925.779592z" fill="#1296db" p-id="8199"></path></svg>',
    inactive: '<svg t="1709484900236" class="icon" viewBox="0 0 1128 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8197" width="20" height="20"><path d="M518.269388 261.22449L273.763265 14.628571 112.84898 6.269388 121.208163 167.183673l244.506123 244.506123zM1046.987755 562.155102c-12.538776-12.538776-31.346939-12.538776-41.795918 0l-94.040817 94.040816-152.555102-152.555102-152.555102 152.555102 152.555102 152.555102-94.040816 94.040817c-12.538776 12.538776-12.538776 31.346939 0 41.795918s31.346939 12.538776 41.795918 0L1044.897959 606.040816c12.538776-10.44898 14.628571-29.257143 2.089796-43.885714 2.089796 0 2.089796 0 0 0zM1128.489796 940.408163l-83.591837 83.591837-183.902041-183.902041 83.591837-83.591837L1128.489796 940.408163z" fill="#323233" p-id="8198"></path><path d="M1007.281633 0l-158.82449 8.359184-626.938776 629.028571-85.681632-87.771428c-12.538776-12.538776-31.346939-12.538776-41.795919 0-10.44898 10.44898-10.44898 29.257143 0 41.795918l334.367347 336.457143c12.538776 12.538776 31.346939 12.538776 41.795919 0 12.538776-12.538776 12.538776-31.346939 0-41.795919l-98.220409-100.310204 626.938776-629.028571 8.359184-156.734694zM0 925.779592l83.591837 83.591837 185.991836-185.991837-83.591836-83.591837L0 925.779592z" fill="#323233" p-id="8199"></path></svg>',
};
const ICON_Course = {
    active: '<svg t="1709484771212" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7057" width="22" height="22"><path d="M896 192v512H128V192h768m0-64H128c-35.2 0-64 28.8-64 64v512c0 35.2 28.8 64 64 64h768c35.2 0 64-28.8 64-64V192c0-35.2-28.8-64-64-64z" fill="#1296db" p-id="7058"></path><path d="M438.4 601.6c-9.6 0-16-3.2-25.6-6.4-16-9.6-28.8-28.8-28.8-48v-201.6c0-19.2 9.6-38.4 28.8-48 16-9.6 38.4-9.6 54.4 3.2l150.4 99.2c16 9.6 22.4 25.6 22.4 44.8s-9.6 35.2-22.4 44.8l-150.4 99.2c-9.6 9.6-19.2 12.8-28.8 12.8z m9.6-233.6v160l118.4-80-118.4-80zM928 896H96c-19.2 0-32-12.8-32-32s12.8-32 32-32h832c19.2 0 32 12.8 32 32s-12.8 32-32 32z" fill="#1296db" p-id="7059"></path></svg>',
    inactive: '<svg t="1709484771212" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7057" width="22" height="22"><path d="M896 192v512H128V192h768m0-64H128c-35.2 0-64 28.8-64 64v512c0 35.2 28.8 64 64 64h768c35.2 0 64-28.8 64-64V192c0-35.2-28.8-64-64-64z" fill="#323233" p-id="7058"></path><path d="M438.4 601.6c-9.6 0-16-3.2-25.6-6.4-16-9.6-28.8-28.8-28.8-48v-201.6c0-19.2 9.6-38.4 28.8-48 16-9.6 38.4-9.6 54.4 3.2l150.4 99.2c16 9.6 22.4 25.6 22.4 44.8s-9.6 35.2-22.4 44.8l-150.4 99.2c-9.6 9.6-19.2 12.8-28.8 12.8z m9.6-233.6v160l118.4-80-118.4-80zM928 896H96c-19.2 0-32-12.8-32-32s12.8-32 32-32h832c19.2 0 32 12.8 32 32s-12.8 32-32 32z" fill="#323233" p-id="7059"></path></svg>',
};
const ICON_AITeacher = {
    active: '<svg t="1709484131282" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1733" width="22" height="22"><path d="M512.554667 53.290667a185.728 185.728 0 0 1 102.058666 28.416l255.445334 167.594666a167.936 167.936 0 0 1 0 280.917334l-255.573334 167.68a186.666667 186.666667 0 0 1-101.589333 27.946666 186.709333 186.709333 0 0 1-101.632-27.989333l-256.768-167.594667a167.936 167.936 0 0 1 0-281.6l256.853333-167.637333a186.026667 186.026667 0 0 1 101.205334-27.733333z m0.341333 608.597333a124.16 124.16 0 0 0 66.645333-17.664l255.616-167.68a103.936 103.936 0 0 0 0-173.909333l-255.616-167.509334a123.178667 123.178667 0 0 0-66.986666-17.834666 123.733333 123.733333 0 0 0-66.133334 17.408L189.44 302.421333a103.936 103.936 0 0 0 0 174.250667l256.853333 167.68a124.202667 124.202667 0 0 0 66.602667 17.536z" p-id="1734" fill="#1296db"></path><path d="M511.872 970.496a176.341333 176.341333 0 0 1-52.906667-7.381333l-136.277333-45.269334A177.109333 177.109333 0 0 1 207.786667 758.186667l0.426666-200.106667a32 32 0 0 1 32.085334-32 32 32 0 0 1 31.914666 32l-0.426666 200.192a114.517333 114.517333 0 0 0 71.125333 98.816l136.064 45.226667a132.650667 132.650667 0 0 0 66.176 0l135.936-45.184a114.56 114.56 0 0 0 71.125333-98.944v-197.973334a32 32 0 1 1 64 0v197.973334a177.109333 177.109333 0 0 1-114.901333 159.658666l-136.149333 45.226667h-0.298667a179.498667 179.498667 0 0 1-52.992 7.424zM913.066667 672a32 32 0 0 1-32-32V384a32 32 0 0 1 32-32 32 32 0 0 1 32 32v256a32 32 0 0 1-32 32z" p-id="1735" fill="#1296db"></path></svg>',
    inactive: '<svg t="1709484131282" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1733" width="22" height="22"><path d="M512.554667 53.290667a185.728 185.728 0 0 1 102.058666 28.416l255.445334 167.594666a167.936 167.936 0 0 1 0 280.917334l-255.573334 167.68a186.666667 186.666667 0 0 1-101.589333 27.946666 186.709333 186.709333 0 0 1-101.632-27.989333l-256.768-167.594667a167.936 167.936 0 0 1 0-281.6l256.853333-167.637333a186.026667 186.026667 0 0 1 101.205334-27.733333z m0.341333 608.597333a124.16 124.16 0 0 0 66.645333-17.664l255.616-167.68a103.936 103.936 0 0 0 0-173.909333l-255.616-167.509334a123.178667 123.178667 0 0 0-66.986666-17.834666 123.733333 123.733333 0 0 0-66.133334 17.408L189.44 302.421333a103.936 103.936 0 0 0 0 174.250667l256.853333 167.68a124.202667 124.202667 0 0 0 66.602667 17.536z" p-id="1734" fill="#323233"></path><path d="M511.872 970.496a176.341333 176.341333 0 0 1-52.906667-7.381333l-136.277333-45.269334A177.109333 177.109333 0 0 1 207.786667 758.186667l0.426666-200.106667a32 32 0 0 1 32.085334-32 32 32 0 0 1 31.914666 32l-0.426666 200.192a114.517333 114.517333 0 0 0 71.125333 98.816l136.064 45.226667a132.650667 132.650667 0 0 0 66.176 0l135.936-45.184a114.56 114.56 0 0 0 71.125333-98.944v-197.973334a32 32 0 1 1 64 0v197.973334a177.109333 177.109333 0 0 1-114.901333 159.658666l-136.149333 45.226667h-0.298667a179.498667 179.498667 0 0 1-52.992 7.424zM913.066667 672a32 32 0 0 1-32-32V384a32 32 0 0 1 32-32 32 32 0 0 1 32 32v256a32 32 0 0 1-32 32z" p-id="1735" fill="#323233"></path></svg>',
};
const ICON_QuestionBank = {
    active: '<svg t="1709485017364" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9351" width="22" height="22"><path d="M928 638.72h-476.16v-61.44h420.0448c-8.7552-20.8384-13.3632-43.4176-13.3632-66.56s4.608-45.7216 13.3632-66.56H451.84v-61.44h476.16c12.288 0 23.3472 7.3216 28.2112 18.5856a30.72 30.72 0 0 1-5.888 33.28c-19.5584 20.6848-30.3616 47.7696-30.3616 76.1856s10.8032 55.4496 30.3616 76.1856a30.68416 30.68416 0 0 1 5.888 33.28 30.7712 30.7712 0 0 1-28.2112 18.4832zM257.28 638.72h-97.28c-45.1584 0-81.92-36.7616-81.92-81.92v-92.16c0-45.1584 36.7616-81.92 81.92-81.92h97.28v61.44h-97.28c-11.3152 0-20.48 9.1648-20.48 20.48v92.16c0 11.3152 9.1648 20.48 20.48 20.48h97.28v61.44zM928 951.04h-768c-45.1584 0-81.92-36.7616-81.92-81.92v-92.16c0-45.1584 36.7616-81.92 81.92-81.92h97.28v61.44h-97.28c-11.3152 0-20.48 9.1648-20.48 20.48v92.16c0 11.3152 9.1648 20.48 20.48 20.48h711.8848c-8.7552-20.8384-13.3632-43.4176-13.3632-66.56s4.608-45.7216 13.3632-66.56H451.84v-61.44h476.16c12.288 0 23.3472 7.3216 28.2112 18.5856a30.72 30.72 0 0 1-5.888 33.28c-19.5584 20.6848-30.3616 47.7696-30.3616 76.1856s10.8032 55.4496 30.3616 76.1856a30.68416 30.68416 0 0 1 5.888 33.28 30.7712 30.7712 0 0 1-28.2112 18.4832zM928 326.4h-476.16v-61.44h420.0448c-8.7552-20.8384-13.3632-43.4176-13.3632-66.56s4.608-45.7216 13.3632-66.56H160c-11.3152 0-20.48 9.1648-20.48 20.48v92.16c0 11.3152 9.1648 20.48 20.48 20.48h97.28v61.44h-97.28c-45.1584 0-81.92-36.7616-81.92-81.92v-92.16c0-45.1584 36.7616-81.92 81.92-81.92h768c12.288 0 23.3472 7.3216 28.2112 18.5856a30.72 30.72 0 0 1-5.888 33.28c-19.5584 20.6848-30.3616 47.7696-30.3616 76.1856s10.8032 55.4496 30.3616 76.1856a30.68416 30.68416 0 0 1 5.888 33.28 30.7712 30.7712 0 0 1-28.2112 18.4832z" fill="#1296db" p-id="9352"></path><path d="M451.84 853.76c-7.9872 0-15.872-3.1232-21.7088-9.0112l-75.5712-75.5712-75.5712 75.5712a30.68928 30.68928 0 0 1-33.4848 6.656 30.73536 30.73536 0 0 1-18.944-28.3648v-573.44c0-45.1584 34.56-81.92 77.056-81.92h101.888c42.496 0 77.056 36.7616 77.056 81.92v573.44c0 12.4416-7.4752 23.6032-18.944 28.3648-3.84 1.5872-7.8336 2.3552-11.776 2.3552z m-97.28-158.72c7.8848 0 15.7184 3.0208 21.7088 9.0112l44.8512 44.8512V249.6c0-11.1104-7.168-20.48-15.616-20.48H303.616c-8.448 0-15.616 9.3696-15.616 20.48v499.2512l44.8512-44.8512a30.75072 30.75072 0 0 1 21.7088-8.96z" fill="#1296db" p-id="9353"></path></svg>',
    inactive: '<svg t="1709485017364" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9351" width="22" height="22"><path d="M928 638.72h-476.16v-61.44h420.0448c-8.7552-20.8384-13.3632-43.4176-13.3632-66.56s4.608-45.7216 13.3632-66.56H451.84v-61.44h476.16c12.288 0 23.3472 7.3216 28.2112 18.5856a30.72 30.72 0 0 1-5.888 33.28c-19.5584 20.6848-30.3616 47.7696-30.3616 76.1856s10.8032 55.4496 30.3616 76.1856a30.68416 30.68416 0 0 1 5.888 33.28 30.7712 30.7712 0 0 1-28.2112 18.4832zM257.28 638.72h-97.28c-45.1584 0-81.92-36.7616-81.92-81.92v-92.16c0-45.1584 36.7616-81.92 81.92-81.92h97.28v61.44h-97.28c-11.3152 0-20.48 9.1648-20.48 20.48v92.16c0 11.3152 9.1648 20.48 20.48 20.48h97.28v61.44zM928 951.04h-768c-45.1584 0-81.92-36.7616-81.92-81.92v-92.16c0-45.1584 36.7616-81.92 81.92-81.92h97.28v61.44h-97.28c-11.3152 0-20.48 9.1648-20.48 20.48v92.16c0 11.3152 9.1648 20.48 20.48 20.48h711.8848c-8.7552-20.8384-13.3632-43.4176-13.3632-66.56s4.608-45.7216 13.3632-66.56H451.84v-61.44h476.16c12.288 0 23.3472 7.3216 28.2112 18.5856a30.72 30.72 0 0 1-5.888 33.28c-19.5584 20.6848-30.3616 47.7696-30.3616 76.1856s10.8032 55.4496 30.3616 76.1856a30.68416 30.68416 0 0 1 5.888 33.28 30.7712 30.7712 0 0 1-28.2112 18.4832zM928 326.4h-476.16v-61.44h420.0448c-8.7552-20.8384-13.3632-43.4176-13.3632-66.56s4.608-45.7216 13.3632-66.56H160c-11.3152 0-20.48 9.1648-20.48 20.48v92.16c0 11.3152 9.1648 20.48 20.48 20.48h97.28v61.44h-97.28c-45.1584 0-81.92-36.7616-81.92-81.92v-92.16c0-45.1584 36.7616-81.92 81.92-81.92h768c12.288 0 23.3472 7.3216 28.2112 18.5856a30.72 30.72 0 0 1-5.888 33.28c-19.5584 20.6848-30.3616 47.7696-30.3616 76.1856s10.8032 55.4496 30.3616 76.1856a30.68416 30.68416 0 0 1 5.888 33.28 30.7712 30.7712 0 0 1-28.2112 18.4832z" fill="#323233" p-id="9352"></path><path d="M451.84 853.76c-7.9872 0-15.872-3.1232-21.7088-9.0112l-75.5712-75.5712-75.5712 75.5712a30.68928 30.68928 0 0 1-33.4848 6.656 30.73536 30.73536 0 0 1-18.944-28.3648v-573.44c0-45.1584 34.56-81.92 77.056-81.92h101.888c42.496 0 77.056 36.7616 77.056 81.92v573.44c0 12.4416-7.4752 23.6032-18.944 28.3648-3.84 1.5872-7.8336 2.3552-11.776 2.3552z m-97.28-158.72c7.8848 0 15.7184 3.0208 21.7088 9.0112l44.8512 44.8512V249.6c0-11.1104-7.168-20.48-15.616-20.48H303.616c-8.448 0-15.616 9.3696-15.616 20.48v499.2512l44.8512-44.8512a30.75072 30.75072 0 0 1 21.7088-8.96z" fill="#323233" p-id="9353"></path></svg>',
};
const route = useRoute();
const router = useRouter();
const title =ref("培训");
console.log(route.fullPath);

router.isReady().then(() => {
    console.log('router', router.currentRoute.value);
    switch (route.path) {
        case '/online-training':
            active.value = 0;
            break;
        case '/marketing':
            console.log('marketing');
            active.value = 1;
            break;
        case '/smart-analyze':
            active.value = 2;
            break;
        case '/mine':
            active.value = 3;
            break;
        default:
            break;
    }
    onTabbarChange(active.value);
})

onMounted(() => {
    console.log('mounted');
    console.log(route, route.path, route.fullPath);
    console.log('router', router.currentRoute.value);
});

const onTabbarChange = (active:any) => {
    console.log('onTabbarChange', active);
    if(active === 0) {
        title.value = "培训";
    } else if(active === 1) {
        title.value = "营销";
    } else if(active === 2) {
        title.value = "智能分析";
    } else if(active === 3) {
        title.value = "我的";
    }
}

</script>

<style scoped>
.tabPages {
    height: calc(100% - 50px - 46px);
}
</style>
